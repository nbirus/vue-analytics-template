/*
  root classes and components
*/

@import (reference) 'app-helper.less';
@import (reference) 'theme-generator.less';

// ------------ colors --------------------
// bg and text theme colors
@global-scope: {
  .generateThemeClasses({

    // ------------- background -------------
    .bg-@{name} { background-color: @color!important; }
    .bg-@{name}-dark { background-color: @color-dark; }
    .bg-@{name}-light { background-color: @color-light; }

    // ------------- text -------------
    .text-@{name} { color: @color!important; }
    .text-@{name}-light { color: @color-light; }
    .text-@{name}-dark { color: @color-dark; }

    // ------------- panel -------------
    .panel.bar-@{name}:before {
      background-color: @color;
    }

  });
};
@global-scope();

// -----------  root layout -----------
:root {
  font-size: @root-size;
}

 #app {
  display: flex;
  flex-direction: column;
   background-color: @page-bg-color;

  & > .header {
    flex: 0 0 60px;
  }

  // page nav bar
  & > .nav-bar {
    position: fixed;
    width: 100%; height: @nav-header-height;
    top: 0; left: 0;
    z-index: 99;
  }

  & > .content {
    flex: 0 1 100%;

    padding-top: @nav-header-height;

    display: flex;
    flex-direction: column;
    justify-items: stretch;
  }
}

// -----------  page styles -----------
.page {
  min-height: @page-min-height;

  & >.page-header {
    top: 0;

    padding: 1rem 0; margin: 0;

    // background-color: @page-header-color;
    background-color: lighten(@page-bg-color, 3%);
    // background-color: lighten(@nav-bg-color, 15%);
    border-bottom: solid 2px darken(@page-bg-color, 7%);

    .page-header-content {
      width: 100%; height: 100%;
      .max-page-width;

      display: flex;
      justify-content: space-between;

      padding: 0 @page-padding;

      // features
      .page-title-container {
        flex: 0 0 auto;
        height: 100%;

        padding: 0; margin: 0;

        display: flex;

        .icon {
          margin-right: 8px;
          padding: 3px 8px 0 0;

          // background-color: fadeout(black, 96%);
          border-right: solid 1px fadeout(black, 90%);
          // color: fadeout(black, 75%);
          color: @c-inverse;
          // color: fadeout(black, 5%);

          font-size: 1.8rem;
          height: 100%;

          i {
            display: inline-block;
          }
        }

        h2 {
          color: @c-inverse;
          // color: white;
          font-weight: 100;
          font-size: 1.9rem;

          // if icon exists
          i {
            margin-right: 8px;
            font-size: 1.5rem;
          }
        }

      }

      .page-actions {
        flex: 0 0 auto;

        display: flex;
        align-items: center;
      }
    }

  }

  & >.page-body {
    .max-page-width;
    padding: 1.2rem @page-padding;
  }

}

// -----------  form -----------
.form-group {

  // label
  .form-label {
    font-size: 1rem;
    display: block;
    margin-bottom: .5em;
    .f-b;
  }

  // input
  .form-control {
    width: 100%;
    transition: @transition;
  }

  // error text
  .form-error-text {
    color: @input-error-color;
    font-size: 1rem;
  }

  // required
  &.required > .form-label:after {
    content: "*";
    color: @c-danger;
  }

}

// -----------  style components -----------

// ----- panel -----
.panel {
  position: relative;

  background-color: white;
  border: solid thin darken(@c-light, 7%);
  border-radius: @panel-border-radius;

  display: flex;
  flex-direction: column;

  .box-shadow(@panel-shadow);

  &.no-shadow {
    box-shadow: none!important;
  }

  // ------ features ------
  hr {
    display: block;
    height: 1px;
    border: 0;
    border-top: 1px solid @grey2;
    margin: 0 0;
    padding: 0;
  }

  // for panel inside tab
  section {
    height: 100%;

    display: flex;
    flex-direction: column;
  }

  .panel-header {
    flex: 0 0 auto;
    padding: @panel-padding;
  }

  .panel-body {
    flex: 0 1 100%;

    &.darken {
      border-top: solid thin fadeout(black, 95%);
      background-color: fadeout(black, 98%);
    }

    // generic block
    .panel-block {
      padding: @panel-padding;
    }

    // block out section
    .panel-section {
      background-color: fadeout(black, 98%);
      border-top: solid thin fadeout(black, 95%);
      border-bottom: solid thin fadeout(black, 95%);

      padding: @panel-padding;
    }

  }

  .panel-footer {
    flex: 0 0 auto;
    padding: @panel-padding;

    background-color: fadeout(black, 95%);
    border-top: solid thin fadeout(black, 95%);
  }

  // ------ bar ------

  // all
  &.bar-left:before, &.bar-right:before, &.bar-top:before, &.bar-bottom:before {
    content: " ";

    display: block;
    position: absolute;
    overflow: hidden;
  }

  // left
  &.bar-left:before {
    width: 4px; max-width: 4px;
    top: 2px; bottom: 2px; left: -4px;
    border-radius: @br 0 0 @br;
    background-color: @c-inverse;
  }

  // top
  &.bar-top:before {
    height: 4px; max-height: 4px;
    top: -4px; left: 1px; right: 1px;
    border-radius: @br @br 0 0;
    background-color: @c-inverse;
  }

  // right
  &.bar-right:before {
    width: 4px; max-width: 4px;
    top: 2px; bottom: 2px; right: -4px;
    border-radius: 0 @br @br 0;
    background-color: @c-inverse;
  }

  // bottom
  &.bar-bottom:before {
    height: 4px; max-height: 4px;
    bottom: -4px; left: 1px; right: 1px;
    border-radius: 0 0 @br @br;
    background-color: @c-inverse;
  }

}

// ----- well -----
.well {}

// ----- icon circle -----
.icon-circle {
  font-size: 1.2rem;
  padding: 1.2em;
  border-radius: 50%;

  background-color: fadeout(black, 96%);
  border: solid thin fadeout(black, 94%);

  display: flex;
  align-items: center;
  justify-content: center;
}

// -----------  transitions -----------

// side in from right
.slide-in-from-right-enter-active {
  transition: transform .2s;
}
.slide-in-from-right-leave-active {
  transition: transform .2s;
}
.slide-in-from-right-enter, .slide-in-from-right-leave-to {
  transform: translateX(400px);
}

// side in from left
.slide-in-from-left-enter-active {
  transition: transform .2s;
}
.slide-in-from-left-leave-active {
  transition: transform .2s;
}
.slide-in-from-left-enter, .slide-in-from-left-leave-to {
  transform: translateX(-400px);
  opacity: 0;
}


// page header
// .page-header-enter-active {
//   transition: transform .4s;
// }
// .page-header-leave-active {
//   transition: transform .4s ease-in;
// }
// .page-header-enter, .page-header-leave-to {
//   transform: translateY(-10px);
//   opacity: 0;
// }

.page-header-enter {
  transform: translateY(-20px);
  opacity: 0;
}
.page-header-enter-active {
  transition: all .3s cubic-bezier(.02,.66,.37,.99);
}
.page-header-enter-to {
  opacity: 1;
}
.page-header-leave {}
.page-header-leave-active {
  transition: all .3s cubic-bezier(.97,.04,1,.51);
}
.page-header-leave-to {
  transform: translateY(20px);
  opacity: 0;
}


.default-page-transition-enter {
  transform: translateX(-25px);
  opacity: 0;
}
.default-page-transition-enter-active {
  transition: all .3s cubic-bezier(.02,.66,.37,.99);
}
.default-page-transition-enter-to {
  opacity: 1;
}
.default-page-transition-leave {}
.default-page-transition-leave-active {
  transition: all .3s cubic-bezier(.97,.04,1,.51);
}
.default-page-transition-leave-to {
  transform: translateX(25px);
  opacity: 0;
}


// dashboard enter animation
.dashboard-list-enter {
  opacity: 0;
  transform: translateY(40px) rotateY(45deg);
}
.dashboard-list-enter-active {
  transition: all .65s;
  .foreach ({
    &:nth-child(@{value}) {
      @speed: .1;
      @delay: @value * @speed;

      transition-delay:  ~'@{delay}s';
    }
  }, 12);
}
.dashboard-list-enter-to {
  opacity: 1;
}
.dashboard-list-leave {
  opacity: 0;
}
.dashboard-list-leave-active {
  transition: opacity 0s; // make charts exit instantly
}
.dashboard-list-leave-to {
  opacity: 0;
}

.foreach(@body, @i) when (@i>0) {
  .foreach(@body, @i - 1);

  @value: @i;
  @body();
}

// ---- grid overrides, need to do something with these ----
.ag-fresh .ag-root {
  border: none;
}
.ag-cell {
  line-height: 35px;
  vertical-align: middle;
  padding: 0 10px !important;
  color: @grey9;
  border: none!important;
  border-right: solid thin @grey3!important;
}
.ag-fresh .ag-header {
  background: none;
  background-color: @grey2!important;
  border-top: solid 3px @c-inverse;
}
.ag-header-cell {
  background-color: @grey1!important;
}
